sap.ui.define(["cross/fnd/fiori/inbox/CA_FIORI_INBOXExtension1/model/formatter"],function(e){"use strict";return sap.ui.controller("cross.fnd.fiori.inbox.CA_FIORI_INBOXExtension1.view.S3Custom",{formatter:e,extHookChangeFooterButtons:function(e){var t=e.aButtonList.length;var i=e.aButtonList;i.splice(2,5)},showDecisionDialog:function(e,t,i){var n=this.getView().getBindingContext().sPath;var o=this.getView().getModel().oData;n=n.slice(1);var s=o[n].TaskTitle;var a=s.split(" ");var r=this.getView().getModel("BoModel");var d=this.getView().byId("VboxContainer").getModel("BoModel").getBindings()[0].oContext.getProperty("Zcom");if(t.Nature==="POSITIVE"){this.oConfirmationDialogManager.showDecisionDialog({question:this.i18nBundle.getText("XMSG_DECISION_QUESTION",t.DecisionText),textAreaLabel:this.i18nBundle.getText("XFLD_TextArea_Decision"),showNote:i,title:this.i18nBundle.getText("XTIT_SUBMIT_DECISION"),confirmButtonLabel:this.i18nBundle.getText("XBUT_SUBMIT"),noteMandatory:false,confirmActionHandler:jQuery.proxy(function(t,i,n){this.sendAction(e,t,n);var o="ZBureauDordre";var s="manage";var d="?Zrefde="+a[3];var l="#"+o+"-"+s;var u={RefDoc:a[3],Satut:t.Nature,newComment:n};r.callFunction("/UpdateDocStatus",{method:"POST",urlParameters:u,success:function(e,t){if(e.Zstatid==="005"){sap.m.URLHelper.redirect(l+d,true)}this.getView().getModel().refresh()}.bind(this)})},this,t,this)})}else{this.oConfirmationDialogManager.showDecisionDialog({question:this.i18nBundle.getText("XMSG_DECISION_QUESTION",t.DecisionText),textAreaLabel:this.i18nBundle.getText("XFLD_TextArea_Decision"),showNote:i,title:this.i18nBundle.getText("XTIT_SUBMIT_DECISION"),confirmButtonLabel:this.i18nBundle.getText("XBUT_SUBMIT"),noteMandatory:true,confirmActionHandler:jQuery.proxy(function(t,i,n){this.sendAction(e,t,n);var o={RefDoc:a[3],Satut:t.Nature,newComment:n};r.callFunction("/UpdateDocStatus",{method:"POST",urlParameters:o,success:function(e,t){this.getView().getModel().refresh()}.bind(this)})},this,t,this)})}sap.ui.getCore().byId("confirmDialogTextarea").setValue(d)},NavTo:function(e){var t="";var i="";var n="";t="Z_TEST_OBJ";i="display";var o="#"+t+"-"+i;sap.m.URLHelper.redirect(o,true)},extHookGetEntitySetsToExpand:function(){var e=this.getView().getBindingContext().sPath;var t=this.getView().getModel().oData;e=e.slice(1);var i=t[e].TaskTitle;var n=i.split(" ");var o=n[3];var s="/Document_entrantSet('"+o+"')";this.bindInfoGenData(s);this.bindHeaderData(s);this.getPjs(o)},bindInfoGenData:function(e){var t=this.getView();this.getView().byId("VboxContainer").bindElement({model:"BoModel",path:e,parameters:{expand:"DOC_SERVICESSet"},events:{dataRequested:function(){t.setBusy(true)},dataReceived:function(e){t.setBusy(false)},change:function(e){t.setBusy(false);this.getModel("BoModel").refresh()}}})},bindHeaderData:function(e){var t=this.getView().byId("DocHedar");t.bindElement({model:"BoModel",path:e,events:{dataRequested:function(){t.setBusy(true)},dataReceived:function(e){t.setBusy(false)},change:function(e){t.setBusy(false);this.getModel("BoModel").refresh()}}})},getPjs:function(e){var t=this.getView().getModel("piecesJointesModel");if(!t){this.getView().setModel(new sap.ui.model.json.JSONModel({items:[],busy:false}),"piecesJointesModel")}var i=this,n="/Document_entrantSet('"+e+"')/ToPiecesJointes";this.getView().byId("pjUploader").setBusy(true);i.getView().getModel("BoModel").read(n,{success:function(e){i.getView().getModel("piecesJointesModel").setData(e.results);i.getView().byId("pjUploader").setBusy(false)},error:function(e){i.getView().byId("pjUploader").setBusy(false)}})},onRefDocPressed:function(e){var t="On va naviger vers l'application Liste";sap.m.MessageToast.show(t)},openEmployeQuickView:function(e){var t=e.getSource().getBindingContext().getProperty("TaskTitle");var i=t+" : Une popUp contenant les informations du service sera affich√© du ";sap.m.MessageToast.show(i)},onTabSelect:function(){}})});